[四小时速成](https://www.bilibili.com/video/BV1ju6TYHEKU/?spm_id_from=333.337.search-card.all.click&vd_source=c6a202a21b22d69570b8804bf6f810fb)
[知识点](https://blog.csdn.net/Royalic/article/details/119999404)

### 操作系统概述：
主管并控制计算机操作，运用和运行硬件软件资源
提供公共服务来组织用户交互的相互关联的系统软件程序，同时也是计算机系统的内核与基石

需要处理和管理配置内存，决定系统资源供需的优先次序，控制输入输出设备，操作网络和管理文件系统等基本事务；

提供一个让用户和系统交互的操作界面

1.统一管理计算机资源：处理器资源，IO设备资源，存储器资源，文件资源
2.实现了对计算机资源的抽象：IO设备管理软件提供读写接口，文件管理软件提供操作文件接口
3.提供了用户与计算机之间的接口：GUI，命令，系统调用

基本特征：并发共享虚拟异步
**最基本的特征：并发，共享**
并行：多个事件同时发生
并发：多个事件同一个时间间隔发生，看起来同时运行，其实每个程序交替执行
共享：操作系统的资源可供多个并发程序共同使用，称为资源共享，分为互斥共享和同时访问
异步：进程以不可预知速度前进
虚拟：把一个物理上的实体变为若干个逻辑上的对应物


**功能：处理机管理，存储器管理，文件管理，设备管理**

进程控制，进程同步，进程通信，死锁处理，处理机调度
内存分配，地址映射，内存保护与共享，内存扩充
文件存储空间管理，目录管理，文件读写管理和保护
缓冲管理，设备分配，设备处理，虚拟设备等功能

分时操作系统：提供人机交互，但是不能插队
实时操作系统：即时响应，高可靠性


特权指令：用户程序不能使用 如IO指令，中断指令
内核程序：系统的管理者，可执行一切指令

处理机状态：
用户态
核心态

psw标志位，0为用户态

原语：最底层的部分，原子性的，不可切分

中断：内中断和外中断

系统调用，提供唯一接口，可获得OS服务 

体系结构：大内核或者微内核

### 进程管理
计算机中的程序关于某数据集合的一次运行获得，是**系统进行资源分配的基本单位**，是操作系统结构的基础，是指计算机中已执行的程序；
是线程的容器；在当代操作系统中不是基本执行单位

进程控制块PCB，是一种数据结构，是对正在的程序过程的抽象，包含：程序，数据和进程控制块


进程控制块PCB：包含进程状态，程序计数器，CPU寄存器，调度信息，内存管理信息

动态性
并发性
独立性
异步性
结构特征：PCB进程控制，保存进程运行期间的数据，是进程存在的唯一标志；程序段：被进程调度到cpu的代码；数据段：存放数据


**进程的状态：**
运行态
就绪态
阻塞态


创建状态
结束状态

线程：操作系统能够进行运算调度的最小单位，包含在进程之中；
一条线程是指进程中一个单一顺序的控制流
一个进程可以并发多个线程，每条线程并行执行不同任务


#### **处理机调度：**
对处理机进行分配，从就绪队列中按照算法选择一个进程将处理器分配给它运行，实现进程并发执行

分类：高级作业调度
中级内存置换
低级进程调度

剥夺式和非剥夺式

准则：cpu利用率，系统吞吐量，周转时间，等待时间，反应时间

调度方式：先来先服务，短作业优先，优先级调度

高响应比优先调度 R=1+w/t
响应时间除作业要求运行时间
响应时间=等待时间+运行时间

周转时间=完成时间-到达时间
带权周转时间=周转/运行
等待时间=周转-运行




#### 进程同步：信号量机制，管程机制

临界区：每个进程中访问临界资源的那段代码，称为临界区
1.保护共享资源
2.防止静态条件
3.提高程序稳定性
4.依赖于同步机制，互斥锁，信号量，条件变量
5.互斥锁：进入，获得互斥锁，退出，释放互斥锁；互斥锁被占用，会被阻塞
6.信号量：通用的同步机制，控制多个线程对资源的访问，设置为1，模仿互斥锁行为
7.条件变量：

PV操作：申请释放资源操作

四个原则：
1.空闲让进：资源无占用，允许使用；
2.忙则等待：资源被占用，请求进程等待；
3.有限等待：保证等待时间能够使用资源；
4.让权等待：等待时，进程需要让出cpu


进程同步方法：
1.使用fork系统调用创建进程：使用fork系统调用无参数，fork返回两次，分别返回子进程id和0，返回子进程id的是父进程，返回0的是子进程
 - fork系统调用是用于创建进程的；
 - fork创建的进程初始化状态与父进程一样；
 - 系统会为fork的进程分配新的资源
2.共享内存：多进程是共享物理内存的，但操作系统的进程管理，进程间内存空间是独立的，进程默认是不能访问进程空间之外的内存空间的
- 共享存储**允许不相关的进程**访问同一片物理内存；
- 共享内存是两个进程之间**共享和传递数据最快的方式**；
- 共享内存**未提供同步机制**，需要借助其他机制管理访问；


死锁：多个进程因竞争资源造成僵局，没有外力，无法推进
非剥夺资源的竞争，和进程不恰当的推进顺序

预防死锁：
破坏互斥条件
破坏不剥夺条件
破坏请求和保持条件
破坏循环等待条件

避免死锁：
安全状态，银行家算法

死锁定理检测死锁

解除死锁：资源剥夺撤销进程 进程回退 


银行家算法：
资源足够给这个进程，才进行这个进程




### 内存管理

PCB进程控制块
支持多道程序并发执行，提高系统性能

1.内存空间的分配和回收
2.存储的保护和共享
3.地址转换
4.内存扩充  逻辑上扩充

程序：编辑，编译，链接，装入内存，运行


装入方式：
绝对装入不可行
静态重定位，需要连续内存
动态重定位，真正执行时才进行地址转换  需要硬件支持


链接方式
静态链接
装入时链接，边装入边链接
运行时链接，需要目标模块时候，才进行链接


内存空间分配回收：
动态分区：
首次适应，以地址递增链接，分配时顺序查找
最佳适应，以容量递增链接，找到第一个满足要求的分区
最坏适应，以容量递减链接，挑选最大的分区
邻近适应




**非连续分配管理：**

越界中断
缺页中断


基本分页式存储管理，内存分为大小相等分区

页框是内存的
页面是程序的

逻辑地址包括 页号和页内地址  转换为物理地址需要修改页号为块号，页内地址不变

页表，完成页号到块号的映射 页表寄存器

快表，不需要经过内存找到块号  输入寄存器



基本分段式存储管理，地址空间被划分为若干个段，每个段定义了一组逻辑信息
分段式不会产生内部碎片

分页分段区别：
页是物理单位，提高内存利用率为目的，段是逻辑单位，有完整意义，满足用户程序需求
页大小固定，系统决定；段的大小不固定，取决于程序
分页的作业地址是一维的，分段作业地址是二维的


**内存扩充：**
1.覆盖，同一程序或者进程，将程序分为多个段，常用的常驻内存

2.交换，不同进程，作业，内存空间紧张时，将内存中某些进程暂时换出外存，把外存中具备运行条件的进程换入内存，即进程在内存和磁盘之间动态调度

3.虚拟内存，逻辑上扩充内存，也叫请求分页系统
页表机制，中断机制，地址变换机制

![[Pasted image 20250712133553.png]]

1.页面淘汰算法：
先进先出页面淘汰置换算法FIFO
最近最久未使用页面淘汰置换算法LRU
最近最少使用页面淘汰置换算法clock
最优最佳页面淘汰置换算法OPT

虚拟存储器主要特征：多次性，对换性，虚拟性

请求分页系统的硬件支持：请求分页页表机制；缺页中断机制；地址变换机制

局部性原理，cpu总是集中访问程序的某一个部分而不是所有部分平均访问概率



#### 文件系统

文件是计算机硬盘为载体的存储在计算机上的信息集合
文件系统是操作系统中负责操纵和管理文件的一整套设施，实现文件共享和保护


文件的逻辑结构：
无结构文件，流式文件

有结构文件（记录式文件），顺序文件，索引文件，索引顺序文件 

文件的物理结构：顺序，链式，索引结构


目录：文件控制块，目录结构
单级，二级目录，树形目录，图形目录


文件实现：
文件分配
连续分配，链接分配，索引分配，对应顺序，链式，索引结构


文件的存储空间管理

磁盘管理：
柱面号，盘面号，扇面号

调度算法：先来先服务FCFS，最短查找时间优化SSTF，扫描算法，循环算法





### 大题
#### PV操作